<!DOCTYPE html>
<html>
<head>

  <title>Desi Meme Generator</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/SavePhotoPlugin.js"></script>
    <script  type="text/javascript">
  	</script>

  
<style>
body{
	text-transform:capitalize;
}
#container{
	overflow: hidden;
	z-index: 0;
}
#myCanvas{
	z-index: 1000;
	border: 2px solid red;
	
	width: 100%;
}
</style>
</head>

<body>
		<div id="container">
		<canvas id="myCanvas"></canvas>
		</div>
		<input id="toptext" type="text">

<button id="save"></button>

<script type="text/javascript">
	
$(document).ready(function(){
	 var context2= $("#myCanvas")[0].getContext('2d');
	 $("#myCanvas,#container").height((3*window.innerWidth)/4);
		context2.fillStyle = "#0000ff"; 
		
		context2.canvas.width=$("#myCanvas").width();
	  	context2.canvas.height=$("#myCanvas").height();

	  	var canWidth=$("#myCanvas").width();
		var canHeight=$("#myCanvas").height();


  		context2.fillRect(0,0,canWidth,canHeight);

  		$("#toptext").on("keyup",function(){
  			//save blue style of fill rectangle
  			context2.save();
  			 var topTxt=$(this).val();
  			
  			//clear the rectangle
  			context2.clearRect (0,0,context2.canvas.width,context2.canvas.height);
  			//draw the canvas again to get fresh frame
			context2.fillRect(0,0,context2.canvas.width,context2.canvas.height);
			//change fill style to white

			console.log("context width"+context2.canvas.width);
			console.log("context height"+context2.canvas.height);

			console.log($("#myCanvas").width());
			console.log($("#container").width());




			context2.fillStyle = "#ffffff"; 
			context2.strokeStyle = "#ffffff"; 
			context2.rect(0,0,canWidth-100,canHeight-100);
			
			context2.rect(canWidth-100,canHeight-100,50,50);


			context2.stroke();
			var maxWidth=50;
			context2.font="bold 25px verdana";
			context2.fillText(topTxt,50,50,maxWidth);
			context2.strokeText(topTxt,50,150,maxWidth); 
			context2.fillText("this is a demo of a very long text that is not supposed to fit",20,80,30);
			//
			context2.fillText("width:" + context2.measureText(topTxt).width, 20, 150);
			context2.restore();


  		});

});

$("#save").click(function(){
	var canvas = document.getElementById("#myCanvas");
	window.savephotoplugin(canvas,"image/png",device.version,function(val){ 
  	//returns you the saved path in val	
		alert("Photo Saved: " + val);	
});

});

</script>

</body>
</html>